{% extends base %}
{% block content %}
  <div class="row d-flex justify-content-center align-items-center h-100">
    <div class="col col-xl-8">
      <div class="card my-2 mb-2">
        <div class="card-header">
          <h5>Транзакции</h5>
        </div>
        <div class="card-body overflow-auto">
          {% if transactions.length > 0 %}
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Сумма</th>
                  <th scope="col">Дата</th>
                  <th scope="col">Тип</th>
                  <th scope="col">Описание</th>
                  <th scope="col">Статус</th>
                </tr>
              </thead>
              <tbody>
                {% for row in transactions %}
                  <tr>
                    <th scope="row">{{ row.id }}</th>
                    <td>
                      {% if row.to_id == id %}
                        <strong class="text-success bold">+{{ row.amount }}</strong>
                      {% else %}
                        <strong class="text-danger">-{{ row.amount }}</strong>
                      {% endif %}
                    </td>
                    <td>{{ row.created_at.toLocaleString('ru', { timeZone: 'Europe/Moscow' }) }}</td>
                    <td>
                      {% if row.type == 'emission' %}
                        <span class="badge text-bg-warning">{{ row.type }}</span>
                      {% elif row.type == 'commission' %}
                        <span class="badge text-bg-danger">{{ row.type }}</span>
                      {% else %}
                        <span class="badge text-bg-primary">{{ row.type }}</span>
                      {% endif %}
                    </td>
                    <td>{{ row.description }}</td>
                    <td>
                      {% if row.status == 'done' %}
                        <span class="badge text-bg-success">{{ row.status }}</span>
                      {% elif row.status == 'pending' %}
                        <span class="badge text-bg-secondary">{{ row.status }}</span>
                      {% elif row.status == 'blocked' or row.status == 'cancelled' %}
                        <span class="badge text-bg-danger">{{ row.status }}</span>
                      {% else %}
                        {{ row.status }}
                      {% endif %}
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
            <nav>
              <ul class="pagination justify-content-center">
                <li class="page-item {% if prev <= 0 %}disabled{% endif %}">
                  <a class="page-link" href="/account/transactions?page={{ prev }}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="#">{{ current }}</a>
                </li>
                <li class="page-item {% if next <= 0 %}disabled{% endif %}">
                  <a class="page-link" href="/account/transactions?page={{ next }}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                </li>
              </ul>
            </nav>
          {% else %}
            <div class="text-secondary text-center">Транзакций пока нет.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
